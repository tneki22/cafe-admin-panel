package main

import (
	"database/sql"
	"fmt"
	"log"
	"time"

	_ "github.com/lib/pq"
)

func main() {
	// Настройки подключения к базе данных
	connStr := "host=localhost port=5432 user=postgres password=postgres dbname=cafe-admin-users sslmode=disable"
	db, err := sql.Open("postgres", connStr)
	if err != nil {
		log.Fatalf("Ошибка подключения к базе данных: %v", err)
	}
	defer db.Close()

	items := []struct {
		Name        string
		Description string
		Price       float64
	}{
		{"Эспрессо", "Крепкий чёрный кофе, приготовленный под давлением пара через молотые кофейные зёрна.", 120},
		{"Капучино", "Эспрессо с добавлением горячего вспененного молока и молочной пенки.", 150},
		{"Латте", "Эспрессо с большим количеством горячего молока и небольшим количеством молочной пены.", 160},
		{"Мокко", "Эспрессо с шоколадным сиропом и горячим молоком, украшенный взбитыми сливками.", 170},
		{"Раф Кофе", "Эспрессо, смешанный с сливками и ванильным сахаром, взбитый до кремовой консистенции.", 180},
		{"Американо", "Эспрессо, разбавленный горячей водой для более мягкого вкуса.", 110},
		{"Флэт Уайт", "Двойной эспрессо с добавлением горячего молока без пены.", 170},
		{"Макиато", "Эспрессо с небольшим количеством молочной пены сверху.", 130},
		{"Гляссе", "Холодный эспрессо с добавлением шарика ванильного мороженого.", 190},
		{"Айриш Кофе", "Горячий кофе с ирландским виски, коричневым сахаром и взбитыми сливками.", 200},
		{"Матча Латте", "Напиток на основе порошка зелёного чая матча с добавлением молока.", 180},
		{"Какао", "Горячий шоколадный напиток с молоком и взбитыми сливками.", 140},
		{"Чай Латте", "Чёрный чай с добавлением горячего молока и специй.", 150},
		{"Лимонад", "Освежающий напиток из свежих лимонов и мяты.", 100},
		{"Смузи Ягодный", "Смузи из свежих ягод и йогурта.", 160},
		{"Фреш Апельсиновый", "Свежевыжатый апельсиновый сок.", 130},
		{"Пирог Яблочный", "Домашний пирог с яблоками и корицей.", 220},
		{"Чизкейк Классический", "Классический чизкейк с мягким сыром на песочной основе.", 250},
		{"Круассан Масляный", "Свежий хрустящий круассан с маслом.", 80},
		{"Брауни Шоколадный", "Плотный шоколадный пирожок с орехами.", 150},
	}

	for _, item := range items {
		_, err := db.Exec(
			"INSERT INTO menu (name, description, price, created_at) VALUES ($1, $2, $3, $4)",
			item.Name, item.Description, item.Price, time.Now(),
		)
		if err != nil {
			log.Printf("Ошибка вставки товара %s: %v", item.Name, err)
			continue
		}
		fmt.Printf("Добавлен товар: %s\n", item.Name)
	}

	fmt.Printf("Добавлено %d товаров в базу данных.\n", len(items))
}
